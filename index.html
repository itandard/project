<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>포켓몬 카드 랜덤 뽑기(by 홍정보)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root{
      --contentW: min(320px, 85vw);
      --text:#1b1b1b; --bg:#fafafa; --muted:#5f6b7a;
      --red:#d62828; --blue:#3a86ff; --gray:#333;
      --flipDur: 6.5s;
      --sparkleDur: 3100ms;
      --sparkleCount: 70;
    }
    html,body{height:100%}
    body{
      font-family:'Segoe UI',system-ui,-apple-system,Apple SD Gothic Neo,맑은 고딕,sans-serif;
      color:var(--text); background:var(--bg); margin:0; padding:16px; text-align:center;
    }

    h1.title{
      font-size: clamp(28px, 6vw, 42px);
      font-weight: 800;
      margin: 10px 0 18px;
      background: linear-gradient(90deg, #ffde59, #ff914d);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      text-shadow: 1px 2px 4px rgba(0,0,0,0.25);
    }

    #controls{display:flex; gap:10px; justify-content:center; flex-wrap:wrap}
    .cta{
      padding:14px 22px; font-size:clamp(15px,4vw,18px);
      cursor:pointer; border:none; border-radius:14px;
      background:linear-gradient(180deg,#ffe066 0%, #ffca3a 55%, #eaaa00 100%);
      color:#2b2b2b; font-weight:900; letter-spacing:.3px;
      box-shadow:0 10px 22px rgba(255,170,0,.35);
      transition:.2s ease; min-width:160px;
    }

    .cta[disabled]{opacity:.6; cursor:not-allowed}

    #status{margin-top:8px; color:var(--muted); font-size:clamp(12px,3.2vw,14px)}
    .progress-wrap{
      width:min(560px,92vw); height:14px; margin:10px auto 18px;
      border-radius:10px; background:#dfe9f3; border:1px solid #b8c3ce;
      overflow:hidden;
    }
    .progress-fill{ height:100%; width:0%; background:linear-gradient(90deg,#69db7c,#38d9a9 40%,#22b8cf 70%,#748ffc); transition:width .25s ease }

    /* ===== 플립 관련 수정 핵심 ===== */
    .card-slot{ min-height:0 }
    .card-wrap{
      width: var(--contentW);
      margin:16px auto;
      position:relative;
      perspective:1000px;
      perspective-origin:center;
      transform-style: preserve-3d;
      -webkit-perspective:1000px;
      -webkit-transform-style: preserve-3d;
      -webkit-perspective-origin:center;
    }

    .card-3d{
      position: relative;
      transform-style: preserve-3d;
      -webkit-transform-style: preserve-3d;
      transition: transform var(--flipDur) cubic-bezier(.19,.9,.22,1);
      will-change: transform;
    }

    .face{
      position:absolute;
      inset:0;
      border-radius:16px;
      backface-visibility:hidden;
      -webkit-backface-visibility:hidden;
    }

    .face.front{
      transform: rotateY(180deg);
      -webkit-transform: rotateY(180deg);
    }

    .card-3d.is-flipped{
      transform: rotateY(180deg) translateZ(0);
      -webkit-transform: rotateY(180deg) translateZ(0);
    }

    /* 카드 앞면/뒷면 */
    .card{
      width:var(--contentW);
      margin:0 auto;
      padding:14px 18px 16px;
      border:4px solid #333;
      border-radius:16px;
      background:#fff;
      box-shadow:0 0 15px rgba(0,0,0,.2);
      box-sizing:border-box;
    }
    .card img{ width:min(150px,55vw); height:auto; display:block; margin:0 auto }
    .card-name{ margin:8px 0; font-size:clamp(18px,4.5vw,22px); font-weight:800 }

    .card-back{
      height:100%;
      border:4px solid #111;
      border-radius:16px;
      background:linear-gradient(to bottom, #e53935 0 50%, #ffffff 50% 100%);
      box-shadow:inset 0 2px 8px rgba(0,0,0,.2);
    }

    .deck-section{ display:none }
    .deck-section.show{ display:block }
  </style>
</head>
<body>
  <h1 class="title">포켓몬 카드 랜덤 뽑기</h1>

  <div id="controls">
    <button id="draw-button" class="cta" aria-label="카드 뽑기">🎴 카드 뽑기 🎴</button>
  </div>

  <div id="status" role="status">전체 목록 로딩 중…</div>
  <div class="progress-wrap"><div class="progress-fill" id="progress-fill"></div></div>

  <div id="card-slot" class="card-slot"></div>

  <section id="deck-section" class="deck-section" aria-hidden="true">
    <div class="deck-inner">
      <h2 class="deck-title">내가 뽑은 카드</h2>
      <div class="deck-container" id="deck-container"></div>
    </div>
  </section>

<script>
/* ——— 실제 기능 코드 (요약 유지) ——— */
const drawBtn=document.getElementById("draw-button");
const slot=document.getElementById("card-slot");

drawBtn.addEventListener("click", async ()=>{
  drawBtn.disabled=true;
  drawBtn.textContent="🎴 뽑는 중 🎴";

  // 테스트용 간단 카드 (랜덤 이미지)
  const id=Math.floor(Math.random()*150)+1;
  const img=`https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/official-artwork/${id}.png`;

  // 카드 앞면
  const frontHTML=`
    <div class="card">
      <img src="${img}" alt="포켓몬 이미지">
      <div class="card-name">포켓몬 #${id}</div>
    </div>`;

  // 플립 카드 구조
  slot.innerHTML=`
    <div class="card-wrap">
      <div class="card-3d">
        <div class="face back"><div class="card-back"></div></div>
        <div class="face front">${frontHTML}</div>
      </div>
    </div>`;

  const card3d=slot.querySelector(".card-3d");
  requestAnimationFrame(()=>card3d.classList.add("is-flipped"));

  setTimeout(()=>{
    drawBtn.disabled=false;
    drawBtn.textContent="🎴 카드 뽑기 🎴";
  },4000);
});
</script>
</body>
</html>
